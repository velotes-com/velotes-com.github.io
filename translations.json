// Мультиязычная поддержка
const translations = {
    ru: {
        title: "Ремонт электротранспорта - Velotes",
        headerTitle: "Velotes",
        headerSubtitle: "Ремонт электротранспорта и бытовой техники",
        navAbout: "О нас",
        navServices: "Услуги",
        navContact: "Контакты",
        aboutTitle: "О нас",
        aboutText: "Мы специализируемся на ремонте электротранспорта (электросамокатов, велосипедов, гироскутеров и других устройств включая электронные блоки управления двигателей) и бытовой техники (стиральные и посудомоечные машины, микроволновки, электронные блоки управления СМА/ПММ). Наша команда профессионалов гарантирует качественный ремонт и быстрое обслуживание.",
        servicesTitle: "Услуги",
        contactTitle: "Контакты",
        callbackTitle: "Заявка на обратный звонок",
        callbackButton: "Заполнить форму",
        copyright: "&copy; 2025 Velotes. Все права защищены. Минск."
    },
    en: {
        title: "Electric Transport Repair - Velotes",
        headerTitle: "Velotes",
        headerSubtitle: "Electric transport and household appliances repair",
        navAbout: "About Us",
        navServices: "Services",
        navContact: "Contacts",
        aboutTitle: "About Us",
        aboutText: "We specialize in the repair of electric transport (electric scooters, bicycles, hoverboards and other devices including electronic engine control units) and household appliances (washing machines, dishwashers, microwaves, electronic control units for washing machines/dishwashers). Our team of professionals guarantees quality repairs and fast service.",
        servicesTitle: "Services",
        contactTitle: "Contacts",
        callbackTitle: "Callback Request",
        callbackButton: "Fill the Form",
        copyright: "&copy; 2025 Velotes. All rights reserved. Minsk."
    }
};

function applyLanguage(lang) {
    // Сохраняем выбранный язык в localStorage
    localStorage.setItem('preferredLang', lang);
    
    // Устанавливаем атрибут lang для HTML
    document.documentElement.lang = lang;
    
    // Получаем переводы для выбранного языка
    const t = translations[lang];
    if (!t) return;
    
    // Применяем переводы ко всем элементам
    document.title = t.title;
    document.querySelector('header h1').textContent = t.headerTitle;
    document.querySelector('header p').textContent = t.headerSubtitle;
    
    document.querySelector('nav a[href="#about"]').textContent = t.navAbout;
    document.querySelector('nav a[href="#services"]').textContent = t.navServices;
    document.querySelector('nav a[href="#contact"]').textContent = t.navContact;
    
    document.querySelector('#about h2').textContent = t.aboutTitle;
    document.querySelector('#about p').textContent = t.aboutText;
    document.querySelector('#services h2').textContent = t.servicesTitle;
    document.querySelector('#contact h2').textContent = t.contactTitle;
    document.querySelector('.callback-form h2').textContent = t.callbackTitle;
    document.querySelector('.form-link').textContent = t.callbackButton;
    
    document.getElementById('copyright').innerHTML = t.copyright;
    
    // Обновляем активную кнопку языка
    document.querySelectorAll('.lang-option').forEach(link => {
        link.classList.toggle('active', link.dataset.lang === lang);
    });
}

// Определяем язык по умолчанию
function detectLanguage() {
    // Проверяем сохранённый язык в localStorage
    const savedLang = localStorage.getItem('preferredLang');
    if (savedLang) return savedLang;
    
    // Определяем язык браузера
    const browserLang = navigator.language || navigator.userLanguage;
    if (browserLang.startsWith('ru')) return 'ru';
    
    // По умолчанию английский
    return 'en';
}

// Инициализация при загрузке страницы
document.addEventListener('DOMContentLoaded', () => {
    // Устанавливаем язык по умолчанию
    const defaultLang = detectLanguage();
    applyLanguage(defaultLang);
    
    // Обработчики для переключения языка
    document.querySelectorAll('.lang-option').forEach(link => {
        link.addEventListener('click', (e) => {
            e.preventDefault();
            const lang = link.getAttribute('data-lang');
            applyLanguage(lang);
        });
    });
});

// Обработчик аккордеона для услуг
document.querySelectorAll('.service-header').forEach(header => {
    header.addEventListener('click', () => {
        const content = header.nextElementSibling;
        content.style.display = content.style.display === 'none' ? 'block' : 'none';
    });
});
